<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KB Governance Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Cores oficiais Consisa */
            --primary: #0054C7; /* Azul Consisa - RGB: 0, 84, 199 */
            --primary-dark: #003D92;
            --secondary: #FD5960; /* Vermelho Consisa - RGB: 253, 89, 96 */
            --accent: #00C8E6; /* Cyan para destaques */
            --success: #55C800; /* Verde dos sistemas */
            --warning: #F58532; /* Laranja A√ßor */
            --danger: #FD5960;

            /* Backgrounds */
            --bg-dark: #0A0E1A;
            --bg-card: #0F1424;
            --bg-elevated: #151B2E;

            /* Textos */
            --text-primary: #FFFFFF;
            --text-secondary: #8B92B0;
            --border: #1E2640;

            /* Glows */
            --accent-glow: rgba(0, 84, 199, 0.2);
            --secondary-glow: rgba(253, 89, 96, 0.15);
        }

        body {
            font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* Animated Background com cores Consisa */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 30%, rgba(0, 84, 199, 0.12) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(253, 89, 96, 0.08) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            position: relative;
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
            z-index: 1;
        }

        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 2px solid var(--border);
            animation: slideDown 0.6s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary), #0066E6);
            border-radius: 50%; /* C√≠rculo caracter√≠stico da Consisa */
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            font-size: 1.25rem;
            box-shadow: 0 4px 20px var(--accent-glow);
            position: relative;
        }

        .logo-icon::after {
            content: '';
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--secondary);
            border-radius: 50%;
            bottom: -2px;
            right: -2px;
            box-shadow: 0 2px 8px var(--secondary-glow);
        }

        .logo h1 {
            font-size: 1.75rem;
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .logo span {
            color: var(--text-secondary);
            font-weight: 300;
        }

        .sync-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .sync-mode {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 0.75rem 1.25rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transition: all 0.3s ease;
        }

        .sync-mode:hover {
            border-color: var(--primary);
            box-shadow: 0 0 20px var(--accent-glow);
        }

        .sync-mode label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-right: 0.5rem;
        }

        select {
            background: var(--bg-elevated);
            color: var(--text-primary);
            border: 1px solid var(--border);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        select:hover {
            border-color: var(--primary);
        }

        .btn {
            background: linear-gradient(135deg, var(--primary), #0066E6);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            box-shadow: 0 4px 15px var(--accent-glow);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px var(--accent-glow);
        }

        .btn-secondary {
            background: var(--bg-card);
            border: 1px solid var(--border);
            box-shadow: none;
        }

        /* Navigation Tabs */
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--border);
            animation: fadeIn 0.6s ease-out 0.2s both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .tab {
            padding: 1rem 2rem;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .tab:hover {
            color: var(--text-primary);
        }

        .tab.active {
            color: var(--primary);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                width: 0;
            }
            to {
                width: 100%;
            }
        }

        .tab-content {
            display: none;
            animation: fadeInUp 0.4s ease-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Grid System */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .grid-2 {
            grid-template-columns: repeat(2, 1fr);
        }

        .grid-3 {
            grid-template-columns: repeat(3, 1fr);
        }

        .grid-4 {
            grid-template-columns: repeat(4, 1fr);
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover::before {
            opacity: 1;
        }

        .card:hover {
            transform: translateY(-4px);
            border-color: var(--primary);
            box-shadow: 0 8px 30px var(--accent-glow);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .card-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .card-value {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            font-family: 'Montserrat', sans-serif;
            letter-spacing: -0.02em;
        }

        .card-subtitle {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .trend {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.75rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 700;
            font-family: 'Montserrat', sans-serif;
        }

        .trend.up {
            background: rgba(0, 200, 81, 0.15);
            color: var(--success);
        }

        .trend.down {
            background: rgba(255, 61, 0, 0.15);
            color: var(--danger);
        }

        /* Stats Cards */
        .stat-card {
            background: linear-gradient(135deg, var(--bg-card), var(--bg-elevated));
            position: relative;
        }

        .stat-card .card-value {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Chart Container */
        .chart-container {
            height: 300px;
            margin-top: 1rem;
            background: var(--bg-elevated);
            border-radius: 12px;
            padding: 1rem;
        }

        /* Table */
        .table-container {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: var(--bg-elevated);
        }

        th {
            text-align: left;
            padding: 1rem;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            border-bottom: 1px solid var(--border);
        }

        td {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            font-size: 0.875rem;
        }

        tr:hover {
            background: var(--bg-elevated);
        }

        .badge {
            display: inline-block;
            padding: 0.375rem 0.75rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 700;
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .badge.success {
            background: rgba(0, 200, 81, 0.15);
            color: var(--success);
        }

        .badge.warning {
            background: rgba(255, 152, 0, 0.15);
            color: var(--warning);
        }

        .badge.danger {
            background: rgba(255, 61, 0, 0.15);
            color: var(--danger);
        }

        .badge.info {
            background: rgba(0, 217, 255, 0.15);
            color: var(--secondary);
        }

        /* Progress Bar */
        .progress {
            height: 8px;
            background: var(--bg-elevated);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 0.5rem;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 0.6s ease;
            border-radius: 4px;
        }

        /* Search & Filters */
        .search-bar {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .search-input {
            flex: 1;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 0.875rem 1.25rem;
            color: var(--text-primary);
            font-size: 0.9375rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 20px var(--accent-glow);
        }

        .search-input::placeholder {
            color: var(--text-secondary);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            animation: scaleIn 0.3s ease;
        }

        @keyframes scaleIn {
            from {
                transform: scale(0.9);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h2 {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-btn:hover {
            color: var(--danger);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 0.75rem 1rem;
            color: var(--text-primary);
            font-size: 0.9375rem;
            transition: all 0.3s ease;
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 15px var(--accent-glow);
        }

        /* Loading State */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .grid-4 {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .grid,
            .grid-2,
            .grid-3,
            .grid-4 {
                grid-template-columns: 1fr;
            }

            header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .sync-controls {
                width: 100%;
                flex-direction: column;
            }

            .sync-mode {
                width: 100%;
            }

            .tabs {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .tab {
                white-space: nowrap;
            }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--text-secondary);
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.3;
        }

        .empty-state h3 {
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }
    </style>
</head>
<body>
<div class="container">
    <!-- Header -->
    <header>
        <div class="logo">
            <div class="logo-icon">KB</div>
            <div>
                <h1>KB <span>Governance</span></h1>
                <p style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 0.25rem;">
                    Sistema de Governan√ßa de Base de Conhecimento
                </p>
            </div>
        </div>

        <div class="sync-controls">
            <div class="sync-mode">
                <label>Modo de Sync:</label>
                <select id="syncMode" onchange="handleSyncModeChange()">
                    <option value="AUTO">Autom√°tico</option>
                    <option value="MANUAL">Manual</option>
                    <option value="SCHEDULED">Agendado</option>
                </select>
            </div>
            <button class="btn" onclick="syncNow()">
                <span id="syncBtnText">Sincronizar Agora</span>
            </button>
            <button class="btn btn-secondary" onclick="showSettings()">‚öôÔ∏è</button>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <div class="tabs">
        <button class="tab active" onclick="switchTab('dashboard')">üìä Dashboard</button>
        <button class="tab" onclick="switchTab('analytics')">üìà Analytics</button>
        <button class="tab" onclick="switchTab('articles')">üìÑ Artigos</button>
        <button class="tab" onclick="switchTab('assignments')">üë• Atribui√ß√µes</button>
        <button class="tab" onclick="switchTab('issues')">‚ö†Ô∏è Issues</button>
        <button class="tab" onclick="switchTab('search')">üîç Busca</button>
    </div>

    <!-- Dashboard Tab -->
    <div id="dashboard" class="tab-content active">
        <!-- KPIs -->
        <div class="grid grid-4">
            <div class="card stat-card">
                <div class="card-header">
                    <span class="card-title">Total de Artigos</span>
                    <div class="card-icon" style="background: rgba(0, 84, 199, 0.15); color: #0054C7;">üìö</div>
                </div>
                <div class="card-value" id="totalArticles">2,847</div>
                <div class="card-subtitle">
                    <span class="trend up">‚Üë 12% este m√™s</span>
                </div>
            </div>

            <div class="card stat-card">
                <div class="card-header">
                    <span class="card-title">IA-Ready</span>
                    <div class="card-icon" style="background: rgba(85, 200, 0, 0.15); color: #55C800;">‚úì</div>
                </div>
                <div class="card-value" id="iaReady">1,523</div>
                <div class="card-subtitle">
                    53.5% do total
                    <div class="progress">
                        <div class="progress-bar" style="width: 53.5%"></div>
                    </div>
                </div>
            </div>

            <div class="card stat-card">
                <div class="card-header">
                    <span class="card-title">Issues Abertas</span>
                    <div class="card-icon" style="background: rgba(245, 133, 50, 0.15); color: #F58532;">‚ö†Ô∏è</div>
                </div>
                <div class="card-value" id="openIssues">342</div>
                <div class="card-subtitle">
                    <span class="trend down">‚Üì 8% vs semana passada</span>
                </div>
            </div>

            <div class="card stat-card">
                <div class="card-header">
                    <span class="card-title">Score M√©dio</span>
                    <div class="card-icon" style="background: rgba(253, 89, 96, 0.15); color: #FD5960;">‚≠ê</div>
                </div>
                <div class="card-value" id="avgScore">78.4</div>
                <div class="card-subtitle">
                    <span class="trend up">‚Üë 3.2 pontos</span>
                </div>
            </div>
        </div>

        <!-- Charts Row -->
        <div class="grid grid-2">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">Tend√™ncia IA-Ready (30 dias)</span>
                </div>
                <div class="chart-container">
                    <canvas id="trendChart"></canvas>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">Distribui√ß√£o por Sistema</span>
                </div>
                <div class="chart-container">
                    <canvas id="systemChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Problems Overview -->
        <div class="grid grid-4">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">Conte√∫do Vazio</span>
                    <span class="badge danger">Alta</span>
                </div>
                <div class="card-value" style="color: #FD5960;">127</div>
                <div class="card-subtitle">4.5% do total</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">Muito Curto</span>
                    <span class="badge warning">M√©dia</span>
                </div>
                <div class="card-value" style="color: #F58532;">284</div>
                <div class="card-subtitle">10.0% do total</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">Duplicados</span>
                    <span class="badge warning">M√©dia</span>
                </div>
                <div class="card-value" style="color: #F58532;">93</div>
                <div class="card-subtitle">3.3% do total</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">Sem Estrutura</span>
                    <span class="badge info">Baixa</span>
                </div>
                <div class="card-value" style="color: #0054C7;">156</div>
                <div class="card-subtitle">5.5% do total</div>
            </div>
        </div>
    </div>

    <!-- Analytics Tab -->
    <div id="analytics" class="tab-content">
        <div class="card">
            <div class="card-header">
                <span class="card-title">Compara√ß√£o de Per√≠odos</span>
                <select id="periodSelect">
                    <option value="7">√öltimos 7 dias</option>
                    <option value="30" selected>√öltimos 30 dias</option>
                    <option value="90">√öltimos 90 dias</option>
                </select>
            </div>
            <div class="chart-container" style="height: 400px;">
                <canvas id="analyticsChart"></canvas>
            </div>
        </div>

        <div class="grid grid-2" style="margin-top: 1.5rem;">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">Evolu√ß√£o de Qualidade</span>
                </div>
                <div class="chart-container">
                    <canvas id="qualityChart"></canvas>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">Taxa de Resolu√ß√£o de Issues</span>
                </div>
                <div class="chart-container">
                    <canvas id="issuesChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Articles Tab -->
    <div id="articles" class="tab-content">
        <div class="search-bar">
            <input type="text" class="search-input" placeholder="üîç Buscar artigos por t√≠tulo, sistema ou status..." id="articleSearch">
            <select id="systemFilter">
                <option value="">Todos os Sistemas</option>
                <option value="CONSISANET">ConsisaNET</option>
                <option value="NOTAON">NotaON</option>
                <option value="PORTAL">Portal</option>
            </select>
            <select id="statusFilter">
                <option value="">Todos os Status</option>
                <option value="APPROVED">Aprovado</option>
                <option value="PENDING">Pendente</option>
                <option value="ISSUES">Com Issues</option>
            </select>
        </div>

        <div class="table-container">
            <table>
                <thead>
                <tr>
                    <th>ID</th>
                    <th>T√≠tulo</th>
                    <th>Sistema</th>
                    <th>Status</th>
                    <th>Score</th>
                    <th>Issues</th>
                    <th>√öltima Atualiza√ß√£o</th>
                    <th>A√ß√µes</th>
                </tr>
                </thead>
                <tbody id="articlesTable">
                <tr>
                    <td>#2847</td>
                    <td>Como emitir nota fiscal de servi√ßo</td>
                    <td>ConsisaNET</td>
                    <td><span class="badge success">Aprovado</span></td>
                    <td>92</td>
                    <td>0</td>
                    <td>2026-01-22</td>
                    <td>
                        <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.75rem;">Ver</button>
                    </td>
                </tr>
                <tr>
                    <td>#2846</td>
                    <td>Cadastro de cliente pessoa f√≠sica</td>
                    <td>NotaON</td>
                    <td><span class="badge warning">Pendente</span></td>
                    <td>67</td>
                    <td>2</td>
                    <td>2026-01-21</td>
                    <td>
                        <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.75rem;">Ver</button>
                    </td>
                </tr>
                <tr>
                    <td>#2845</td>
                    <td>Configura√ß√£o de impostos ICMS</td>
                    <td>ConsisaNET</td>
                    <td><span class="badge success">Aprovado</span></td>
                    <td>88</td>
                    <td>0</td>
                    <td>2026-01-21</td>
                    <td>
                        <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.75rem;">Ver</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Assignments Tab -->
    <div id="assignments" class="tab-content">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
            <h2 style="font-size: 1.5rem; font-weight: 700;">Atribui√ß√µes</h2>
            <button class="btn" onclick="showAssignmentModal()">+ Nova Atribui√ß√£o</button>
        </div>

        <div class="grid grid-3" style="margin-bottom: 1.5rem;">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">Pendentes</span>
                </div>
                <div class="card-value" style="color: #F58532;">24</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">Em Progresso</span>
                </div>
                <div class="card-value" style="color: #0054C7;">12</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">Conclu√≠das</span>
                </div>
                <div class="card-value" style="color: #55C800;">156</div>
            </div>
        </div>

        <div class="table-container">
            <table>
                <thead>
                <tr>
                    <th>Artigo</th>
                    <th>Atribu√≠do para</th>
                    <th>Prioridade</th>
                    <th>Status</th>
                    <th>Prazo</th>
                    <th>A√ß√µes</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>Como cadastrar fornecedor</td>
                    <td>Jo√£o Silva</td>
                    <td><span class="badge danger">Urgente</span></td>
                    <td><span class="badge warning">Pendente</span></td>
                    <td>2026-01-25</td>
                    <td>
                        <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.75rem;">Editar</button>
                    </td>
                </tr>
                <tr>
                    <td>Relat√≥rio de vendas</td>
                    <td>Maria Santos</td>
                    <td><span class="badge warning">Alta</span></td>
                    <td><span class="badge info">Em Progresso</span></td>
                    <td>2026-01-28</td>
                    <td>
                        <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.75rem;">Editar</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Issues Tab -->
    <div id="issues" class="tab-content">
        <div class="search-bar">
            <input type="text" class="search-input" placeholder="üîç Buscar issues..." id="issueSearch">
            <select id="issueTypeFilter">
                <option value="">Todos os Tipos</option>
                <option value="EMPTY">Conte√∫do Vazio</option>
                <option value="SHORT">Muito Curto</option>
                <option value="DUPLICATE">Duplicado</option>
                <option value="NO_STRUCTURE">Sem Estrutura</option>
            </select>
            <select id="issueStatusFilter">
                <option value="">Todos os Status</option>
                <option value="OPEN">Aberto</option>
                <option value="IN_PROGRESS">Em Progresso</option>
                <option value="RESOLVED">Resolvido</option>
            </select>
        </div>

        <div class="table-container">
            <table>
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Artigo</th>
                    <th>Tipo</th>
                    <th>Severidade</th>
                    <th>Status</th>
                    <th>Criado em</th>
                    <th>A√ß√µes</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>#1523</td>
                    <td>Tutorial de importa√ß√£o</td>
                    <td><span class="badge danger">Vazio</span></td>
                    <td><span class="badge danger">Alta</span></td>
                    <td><span class="badge warning">Aberto</span></td>
                    <td>2026-01-20</td>
                    <td>
                        <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.75rem;">Resolver</button>
                    </td>
                </tr>
                <tr>
                    <td>#1522</td>
                    <td>FAQ de integra√ß√£o</td>
                    <td><span class="badge warning">Duplicado</span></td>
                    <td><span class="badge warning">M√©dia</span></td>
                    <td><span class="badge info">Em Progresso</span></td>
                    <td>2026-01-19</td>
                    <td>
                        <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.75rem;">Resolver</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Search Tab -->
    <div id="search" class="tab-content">
        <div class="card" style="margin-bottom: 1.5rem;">
            <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem;">Busca Inteligente</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                Busca full-text com ranking por relev√¢ncia e boost de qualidade
            </p>

            <div class="search-bar">
                <input type="text" class="search-input" placeholder="üîç Digite sua busca..." id="smartSearch" style="flex: 2;">
                <select id="searchScope">
                    <option value="all">Todos os artigos</option>
                    <option value="ia-ready">Apenas IA-Ready</option>
                    <option value="system">Por sistema</option>
                </select>
                <button class="btn" onclick="performSearch()">Buscar</button>
            </div>
        </div>

        <div id="searchResults">
            <div class="empty-state">
                <div class="empty-state-icon">üîç</div>
                <h3>Realize uma busca</h3>
                <p>Digite um termo acima para buscar na base de conhecimento</p>
            </div>
        </div>
    </div>
</div>

<!-- Assignment Modal -->
<div id="assignmentModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Nova Atribui√ß√£o</h2>
            <button class="close-btn" onclick="closeAssignmentModal()">√ó</button>
        </div>

        <form id="assignmentForm" onsubmit="submitAssignment(event)">
            <div class="form-group">
                <label>Artigo</label>
                <select name="articleId" required>
                    <option value="">Selecione um artigo...</option>
                    <option value="2847">Como emitir nota fiscal de servi√ßo</option>
                    <option value="2846">Cadastro de cliente pessoa f√≠sica</option>
                </select>
            </div>

            <div class="form-group">
                <label>Atribuir para</label>
                <select name="agentId" required>
                    <option value="">Selecione um agente...</option>
                    <option value="joao">Jo√£o Silva</option>
                    <option value="maria">Maria Santos</option>
                    <option value="pedro">Pedro Costa</option>
                </select>
            </div>

            <div class="form-group">
                <label>Prioridade</label>
                <select name="priority" required>
                    <option value="LOW">Baixa</option>
                    <option value="MEDIUM">M√©dia</option>
                    <option value="HIGH">Alta</option>
                    <option value="URGENT">Urgente</option>
                </select>
            </div>

            <div class="form-group">
                <label>Prazo</label>
                <input type="date" name="dueDate" required>
            </div>

            <div class="form-group">
                <label>Observa√ß√µes</label>
                <textarea name="notes" placeholder="Adicione detalhes sobre a atribui√ß√£o..."></textarea>
            </div>

            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                <button type="button" class="btn btn-secondary" onclick="closeAssignmentModal()">Cancelar</button>
                <button type="submit" class="btn">Criar Atribui√ß√£o</button>
            </div>
        </form>
    </div>
</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<script>
    // ==================== API SERVICE ====================
    const API_BASE = window.location.origin;

    async function apiRequest(endpoint) {
        try {
            const response = await fetch(`${API_BASE}${endpoint}`);
            if (!response.ok) throw new Error(`HTTP ${response.status}`);
            return await response.json();
        } catch (error) {
            console.error('API Error:', error);
            return null;
        }
    }
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }

        return await response.json();
    } catch (error) {
        console.error('API Error:', error);
        throw error;
    }
}

// ==================== ANALYTICS ====================

async getTrend(days = 30) {
    return this.request(API_ENDPOINTS.trend(days));
}

async getSystemTrend(systemCode, days = 30) {
    return this.request(API_ENDPOINTS.systemTrend(systemCode, days));
}

async comparePeriods(days = 7) {
    return this.request(API_ENDPOINTS.compare(days));
}

async getChartData(days = 30) {
    return this.request(API_ENDPOINTS.chartData(days));
}

// ==================== SEARCH ====================

async search(query, limit = 10) {
    const params = new URLSearchParams({ q: query, limit });
    return this.request(`${API_ENDPOINTS.search}?${params}`);
}

async searchBySystem(query, systemCode, limit = 10) {
    const params = new URLSearchParams({ q: query, limit });
    return this.request(`${API_ENDPOINTS.searchSystem(systemCode)}?${params}`);
}

async searchIaReady(query, limit = 10) {
    const params = new URLSearchParams({ q: query, limit });
    return this.request(`${API_ENDPOINTS.searchIaReady}?${params}`);
}

async findSimilar(articleId, limit = 5) {
    const params = new URLSearchParams({ limit });
    return this.request(`${API_ENDPOINTS.searchSimilar(articleId)}?${params}`);
}

// ==================== ARTICLES ====================

async getArticles(params = {}) {
    const queryParams = new URLSearchParams(params);
    return this.request(`${API_ENDPOINTS.articles}?${queryParams}`);
}

async getArticle(id) {
    return this.request(API_ENDPOINTS.article(id));
}

async getArticleVersions(id) {
    return this.request(API_ENDPOINTS.articleVersions(id));
}

async updateArticle(id, data) {
    return this.request(API_ENDPOINTS.article(id), {
        method: 'PUT',
        body: JSON.stringify(data)
    });
}

// ==================== ASSIGNMENTS ====================

async getAssignments(params = {}) {
    const queryParams = new URLSearchParams(params);
    return this.request(`${API_ENDPOINTS.assignments}?${queryParams}`);
}

async createAssignment(data) {
    return this.request(API_ENDPOINTS.assignments, {
        method: 'POST',
        body: JSON.stringify(data)
    });
}

async updateAssignment(id, data) {
    return this.request(API_ENDPOINTS.assignment(id), {
        method: 'PUT',
        body: JSON.stringify(data)
    });
}

async deleteAssignment(id) {
    return this.request(API_ENDPOINTS.assignment(id), {
        method: 'DELETE'
    });
}

// ==================== ISSUES ====================

async getIssues(params = {}) {
    const queryParams = new URLSearchParams(params);
    return this.request(`${API_ENDPOINTS.issues}?${queryParams}`);
}

async resolveIssue(id) {
    return this.request(`${API_ENDPOINTS.issue(id)}/resolve`, {
        method: 'POST'
    });
}

// ==================== REPORTS ====================

async getReports(params = {}) {
    const queryParams = new URLSearchParams(params);
    return this.request(`${API_ENDPOINTS.reports}?${queryParams}`);
}

async getSummaryStats() {
    return this.request(API_ENDPOINTS.summaryStats);
}

// ==================== SYNC ====================

async syncNow() {
    return this.request(API_ENDPOINTS.syncNow, {
        method: 'POST'
    });
}

async getSyncMode() {
    return this.request(API_ENDPOINTS.syncMode);
}

async setSyncMode(mode) {
    return this.request(API_ENDPOINTS.syncMode, {
        method: 'PUT',
        body: JSON.stringify({ mode })
    });
}
}

// Inst√¢ncia global da API
const kbApi = new KbGovernanceAPI();

/**
* Dashboard Data Manager
* Gerencia carregamento e atualiza√ß√£o de dados do dashboard
*/
class DashboardManager {
constructor() {
    this.charts = {};
    this.refreshInterval = null;
}

/**
 * Inicializa o dashboard
 */
async init() {
    try {
        await this.loadDashboardData();
        this.initCharts();
        this.setupAutoRefresh(60000); // Atualiza a cada 60 segundos
    } catch (error) {
        console.error('Erro ao inicializar dashboard:', error);
        this.showError('Erro ao carregar dados do dashboard');
    }
}

/**
 * Carrega dados principais do dashboard
 */
async loadDashboardData() {
    try {
        // Carrega tend√™ncia dos √∫ltimos 30 dias
        const trendData = await kbApi.getTrend(30);
        this.updateKPIs(trendData);

        // Carrega estat√≠sticas gerais
        const statsData = await kbApi.getSummaryStats();
        this.updateStats(statsData);

        // Carrega dados para gr√°ficos
        const chartData = await kbApi.getChartData(30);
        this.updateChartData(chartData);

    } catch (error) {
        console.error('Erro ao carregar dados:', error);
        throw error;
    }
}

/**
 * Atualiza KPIs principais
 */
updateKPIs(data) {
    if (!data || data.length === 0) return;

    const latest = data[0]; // √öltimo snapshot

    // Total de Artigos
    document.getElementById('totalArticles').textContent =
        this.formatNumber(latest.totalArticles);

    // IA-Ready
    document.getElementById('iaReady').textContent =
        this.formatNumber(latest.iaReadyCount);

    // Issues Abertas
    document.getElementById('openIssues').textContent =
        this.formatNumber(latest.openIssuesCount);

    // Score M√©dio
    document.getElementById('avgScore').textContent =
        latest.avgQualityScore.toFixed(1);

    // Calcula e atualiza tend√™ncias
    if (data.length > 1) {
        this.updateTrends(data);
    }

    // Atualiza barra de progresso
    const percentage = (latest.iaReadyCount / latest.totalArticles * 100).toFixed(1);
    document.querySelector('.progress-bar').style.width = `${percentage}%`;
}

/**
 * Calcula e atualiza tend√™ncias (compara√ß√£o com per√≠odo anterior)
 */
updateTrends(data) {
    const latest = data[0];
    const previous = data[Math.floor(data.length / 2)]; // Meio do per√≠odo

    // Tend√™ncia de artigos
    const articlesTrend = ((latest.totalArticles - previous.totalArticles) / previous.totalArticles * 100).toFixed(0);

    // Tend√™ncia de issues
    const issuesTrend = ((latest.openIssuesCount - previous.openIssuesCount) / previous.openIssuesCount * 100).toFixed(0);

    // Tend√™ncia de score
    const scoreTrend = (latest.avgQualityScore - previous.avgQualityScore).toFixed(1);

    // Atualiza UI (exemplo - voc√™ pode ajustar os seletores)
    // document.querySelector('#articlesTrend').textContent = `${articlesTrend > 0 ? '‚Üë' : '‚Üì'} ${Math.abs(articlesTrend)}%`;
}

/**
 * Atualiza estat√≠sticas gerais
 */
updateStats(data) {
    // Implemente conforme estrutura dos seus dados
    console.log('Stats:', data);
}

/**
 * Inicializa gr√°ficos com Chart.js
 */
initCharts() {
    const chartConfig = {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                labels: {
                    color: '#8B92B0',
                    font: {
                        family: 'Montserrat',
                        weight: '600'
                    }
                }
            }
        },
        scales: {
            y: {
                grid: { color: '#1E2640' },
                ticks: {
                    color: '#8B92B0',
                    font: { family: 'Montserrat' }
                }
            },
            x: {
                grid: { color: '#1E2640' },
                ticks: {
                    color: '#8B92B0',
                    font: { family: 'Montserrat' }
                }
            }
        }
    };

    // Gr√°fico de Tend√™ncia
    const trendCtx = document.getElementById('trendChart')?.getContext('2d');
    if (trendCtx) {
        this.charts.trend = new Chart(trendCtx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'IA-Ready %',
                    data: [],
                    borderColor: '#0054C7',
                    backgroundColor: 'rgba(0, 84, 199, 0.1)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: chartConfig
        });
    }

    // Gr√°fico por Sistema
    const systemCtx = document.getElementById('systemChart')?.getContext('2d');
    if (systemCtx) {
        this.charts.system = new Chart(systemCtx, {
            type: 'doughnut',
            data: {
                labels: [],
                datasets: [{
                    data: [],
                    backgroundColor: [
                        '#0054C7', '#3377D3', '#FD5960', '#F58532'
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: '#8B92B0',
                            font: { family: 'Montserrat' }
                        }
                    }
                }
            }
        });
    }
}

/**
 * Atualiza dados dos gr√°ficos
 */
updateChartData(data) {
    if (!data) return;

    // Atualiza gr√°fico de tend√™ncia
    if (this.charts.trend && data.dates && data.iaReadyPercentages) {
        this.charts.trend.data.labels = data.dates;
        this.charts.trend.data.datasets[0].data = data.iaReadyPercentages;
        this.charts.trend.update();
    }

    // Atualiza gr√°fico por sistema
    if (this.charts.system && data.systems && data.systemCounts) {
        this.charts.system.data.labels = data.systems;
        this.charts.system.data.datasets[0].data = data.systemCounts;
        this.charts.system.update();
    }
}

/**
 * Carrega lista de artigos
 */
async loadArticles(filters = {}) {
    try {
        const articles = await kbApi.getArticles(filters);
        this.renderArticlesTable(articles);
    } catch (error) {
        console.error('Erro ao carregar artigos:', error);
    }
}

/**
 * Renderiza tabela de artigos
 */
renderArticlesTable(articles) {
    const tbody = document.getElementById('articlesTable');
    if (!tbody) return;

    tbody.innerHTML = articles.map(article => `
        <tr>
            <td>#${article.id}</td>
            <td>${article.title}</td>
            <td>${article.systemCode || 'N/A'}</td>
            <td>${this.getStatusBadge(article.status)}</td>
            <td>${article.qualityScore || 0}</td>
            <td>${article.issuesCount || 0}</td>
            <td>${this.formatDate(article.lastModified)}</td>
            <td>
                <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.75rem;"
                        onclick="viewArticle(${article.id})">Ver</button>
            </td>
        </tr>
    `).join('');
}

/**
 * Carrega lista de issues
 */
async loadIssues(filters = {}) {
    try {
        const issues = await kbApi.getIssues(filters);
        this.renderIssuesTable(issues);
    } catch (error) {
        console.error('Erro ao carregar issues:', error);
    }
}

/**
 * Renderiza tabela de issues
 */
renderIssuesTable(issues) {
    const tbody = document.querySelector('#issues tbody');
    if (!tbody) return;

    tbody.innerHTML = issues.map(issue => `
        <tr>
            <td>#${issue.id}</td>
            <td>${issue.articleTitle}</td>
            <td>${this.getIssueTypeBadge(issue.type)}</td>
            <td>${this.getSeverityBadge(issue.severity)}</td>
            <td>${this.getStatusBadge(issue.status)}</td>
            <td>${this.formatDate(issue.createdAt)}</td>
            <td>
                <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.75rem;"
                        onclick="resolveIssue(${issue.id})">Resolver</button>
            </td>
        </tr>
    `).join('');
}

/**
 * Carrega atribui√ß√µes
 */
async loadAssignments(filters = {}) {
    try {
        const assignments = await kbApi.getAssignments(filters);
        this.renderAssignmentsTable(assignments);
    } catch (error) {
        console.error('Erro ao carregar atribui√ß√µes:', error);
    }
}

/**
 * Renderiza tabela de atribui√ß√µes
 */
renderAssignmentsTable(assignments) {
    const tbody = document.querySelector('#assignments tbody');
    if (!tbody) return;

    tbody.innerHTML = assignments.map(assignment => `
        <tr>
            <td>${assignment.articleTitle}</td>
            <td>${assignment.agentName}</td>
            <td>${this.getPriorityBadge(assignment.priority)}</td>
            <td>${this.getStatusBadge(assignment.status)}</td>
            <td>${this.formatDate(assignment.dueDate)}</td>
            <td>
                <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.75rem;"
                        onclick="editAssignment(${assignment.id})">Editar</button>
            </td>
        </tr>
    `).join('');
}

/**
 * Realiza busca
 */
async performSearch(query, scope = 'all') {
    try {
        let results;

        switch(scope) {
            case 'ia-ready':
                results = await kbApi.searchIaReady(query);
                break;
            case 'system':
                const systemCode = document.getElementById('searchSystemCode')?.value;
                results = await kbApi.searchBySystem(query, systemCode);
                break;
            default:
                results = await kbApi.search(query);
        }

        this.renderSearchResults(results);
    } catch (error) {
        console.error('Erro ao realizar busca:', error);
    }
}

/**
 * Renderiza resultados de busca
 */
renderSearchResults(results) {
    const container = document.getElementById('searchResults');
    if (!container) return;

    if (results.length === 0) {
        container.innerHTML = `
            <div class="empty-state">
                <div class="empty-state-icon">üîç</div>
                <h3>Nenhum resultado encontrado</h3>
                <p>Tente buscar com outros termos</p>
            </div>
        `;
        return;
    }

    container.innerHTML = results.map(result => `
        <div class="card" style="margin-bottom: 1rem;">
            <h3 style="margin-bottom: 0.5rem;">${result.title}</h3>
            <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">
                ${result.systemCode || 'N/A'} ‚Ä¢ Score: ${result.qualityScore || 0} ‚Ä¢
                Relev√¢ncia: ${Math.round(result.relevanceScore * 100)}%
            </p>
            <p style="line-height: 1.6;">${result.snippet}</p>
        </div>
    `).join('');
}

/**
 * Configura auto-refresh
 */
setupAutoRefresh(interval) {
    if (this.refreshInterval) {
        clearInterval(this.refreshInterval);
    }

    this.refreshInterval = setInterval(() => {
        this.loadDashboardData();
    }, interval);
}

/**
 * Utilit√°rios
 */
formatNumber(num) {
    return new Intl.NumberFormat('pt-BR').format(num);
}

formatDate(dateString) {
    if (!dateString) return 'N/A';
    return new Date(dateString).toLocaleDateString('pt-BR');
}

getStatusBadge(status) {
    const badges = {
        'APPROVED': '<span class="badge success">Aprovado</span>',
        'PENDING': '<span class="badge warning">Pendente</span>',
        'REJECTED': '<span class="badge danger">Rejeitado</span>',
        'OPEN': '<span class="badge warning">Aberto</span>',
        'IN_PROGRESS': '<span class="badge info">Em Progresso</span>',
        'RESOLVED': '<span class="badge success">Resolvido</span>',
        'COMPLETED': '<span class="badge success">Conclu√≠do</span>'
    };
    return badges[status] || `<span class="badge">${status}</span>`;
}

getIssueTypeBadge(type) {
    const badges = {
        'EMPTY': '<span class="badge danger">Vazio</span>',
        'SHORT': '<span class="badge warning">Curto</span>',
        'DUPLICATE': '<span class="badge warning">Duplicado</span>',
        'NO_STRUCTURE': '<span class="badge info">Sem Estrutura</span>'
    };
    return badges[type] || `<span class="badge">${type}</span>`;
}

getSeverityBadge(severity) {
    const badges = {
        'HIGH': '<span class="badge danger">Alta</span>',
        'MEDIUM': '<span class="badge warning">M√©dia</span>',
        'LOW': '<span class="badge info">Baixa</span>'
    };
    return badges[severity] || `<span class="badge">${severity}</span>`;
}

getPriorityBadge(priority) {
    const badges = {
        'URGENT': '<span class="badge danger">Urgente</span>',
        'HIGH': '<span class="badge warning">Alta</span>',
        'MEDIUM': '<span class="badge info">M√©dia</span>',
        'LOW': '<span class="badge">Baixa</span>'
    };
    return badges[priority] || `<span class="badge">${priority}</span>`;
}

showError(message) {
    // Implementar notifica√ß√£o de erro
    console.error(message);
    alert(message); // Substitua por toast/notification system
}
}

// Inst√¢ncia global do gerenciador
const dashboard = new DashboardManager();

// Inicializa quando o DOM estiver pronto
document.addEventListener('DOMContentLoaded', () => {
dashboard.init();
});
                break;
            case 'articles':
                dashboard.loadArticles();
                break;
            case 'assignments':
                dashboard.loadAssignments();
                break;
            case 'issues':
                dashboard.loadIssues();
                break;
        }
    }

    // Sync Mode Change
    async function handleSyncModeChange() {
        const mode = document.getElementById('syncMode').value;
        try {
            await kbApi.setSyncMode(mode);
            console.log('Sync mode changed to:', mode);
        } catch (error) {
            console.error('Erro ao alterar modo de sync:', error);
            alert('Erro ao alterar modo de sincroniza√ß√£o');
        }
    }

    // Sync Now
    async function syncNow() {
        const btn = document.getElementById('syncBtnText');
        const originalText = btn.textContent;
        btn.innerHTML = '<span class="loading"></span> Sincronizando...';

        try {
            await kbApi.syncNow();
            btn.textContent = '‚úì Sincronizado!';

            // Recarrega dados do dashboard
            setTimeout(() => {
                dashboard.loadDashboardData();
                btn.textContent = originalText;
            }, 2000);
        } catch (error) {
            console.error('Erro ao sincronizar:', error);
            btn.textContent = '‚úó Erro!';
            setTimeout(() => {
                btn.textContent = originalText;
            }, 2000);
        }
    }

    // Show Settings
    function showSettings() {
        alert('Configura√ß√µes em desenvolvimento');
    }

    // Assignment Modal
    function showAssignmentModal() {
        document.getElementById('assignmentModal').classList.add('active');
    }

    function closeAssignmentModal() {
        document.getElementById('assignmentModal').classList.remove('active');
    }

    async function submitAssignment(event) {
        event.preventDefault();

        const formData = new FormData(event.target);
        const assignment = {
            articleId: formData.get('articleId'),
            agentId: formData.get('agentId'),
            priority: formData.get('priority'),
            dueDate: formData.get('dueDate'),
            notes: formData.get('notes')
        };

        try {
            await kbApi.createAssignment(assignment);
            alert('Atribui√ß√£o criada com sucesso!');
            closeAssignmentModal();
            dashboard.loadAssignments(); // Recarrega lista
        } catch (error) {
            console.error('Erro ao criar atribui√ß√£o:', error);
            alert('Erro ao criar atribui√ß√£o');
        }
    }

    // Search
    async function performSearch() {
        const query = document.getElementById('smartSearch').value;
        const scope = document.getElementById('searchScope').value;

        if (!query) return;

        await dashboard.performSearch(query, scope);
    }

    // Article Actions
    async function viewArticle(id) {
        try {
            const article = await kbApi.getArticle(id);
            // Implementar modal ou p√°gina de detalhes
            console.log('Article:', article);
            alert(`Artigo #${id}: ${article.title}`);
        } catch (error) {
            console.error('Erro ao carregar artigo:', error);
        }
    }

    // Issue Actions
    async function resolveIssue(id) {
        if (!confirm('Deseja marcar esta issue como resolvida?')) return;

        try {
            await kbApi.resolveIssue(id);
            alert('Issue resolvida!');
            dashboard.loadIssues(); // Recarrega lista
        } catch (error) {
            console.error('Erro ao resolver issue:', error);
            alert('Erro ao resolver issue');
        }
    }

    // Assignment Actions
    async function editAssignment(id) {
        // Implementar modal de edi√ß√£o
        alert(`Editar atribui√ß√£o #${id}`);
    }

    // Load Analytics Tab
    async function loadAnalyticsTab() {
        if (window.analyticsChartsLoaded) return;
        window.analyticsChartsLoaded = true;

        try {
            const chartData = await kbApi.getChartData(30);

            // Analytics Chart
            const analyticsCtx = document.getElementById('analyticsChart').getContext('2d');
            new Chart(analyticsCtx, {
                type: 'line',
                data: {
                    labels: chartData.dates || ['Sem 1', 'Sem 2', 'Sem 3', 'Sem 4'],
                    datasets: [
                        {
                            label: 'Total Artigos',
                            data: chartData.totalArticles || [2650, 2720, 2790, 2847],
                            borderColor: '#0054C7',
                            tension: 0.4
                        },
                        {
                            label: 'IA-Ready',
                            data: chartData.iaReadyCounts || [1320, 1410, 1480, 1523],
                            borderColor: '#55C800',
                            tension: 0.4
                        }
                    ]
                },
                options: dashboard.charts.trend?.options || {}
            });

            // Quality Chart
            const qualityCtx = document.getElementById('qualityChart').getContext('2d');
            new Chart(qualityCtx, {
                type: 'bar',
                data: {
                    labels: chartData.dates || ['Sem 1', 'Sem 2', 'Sem 3', 'Sem 4'],
                    datasets: [{
                        label: 'Score M√©dio',
                        data: chartData.avgScores || [72, 74, 76, 78.4],
                        backgroundColor: '#0054C7'
                    }]
                },
                options: dashboard.charts.trend?.options || {}
            });

            // Issues Chart
            const issuesCtx = document.getElementById('issuesChart').getContext('2d');
            new Chart(issuesCtx, {
                type: 'line',
                data: {
                    labels: chartData.dates || ['Sem 1', 'Sem 2', 'Sem 3', 'Sem 4'],
                    datasets: [
                        {
                            label: 'Abertas',
                            data: chartData.openIssues || [420, 390, 370, 342],
                            borderColor: '#F58532',
                            tension: 0.4
                        },
                        {
                            label: 'Resolvidas',
                            data: chartData.resolvedIssues || [280, 310, 340, 372],
                            borderColor: '#55C800',
                            tension: 0.4
                        }
                    ]
                },
                options: dashboard.charts.trend?.options || {}
            });
        } catch (error) {
            console.error('Erro ao carregar analytics:', error);
        }
    }

    // Search on Enter
    document.addEventListener('DOMContentLoaded', () => {
        const searchInput = document.getElementById('smartSearch');
        if (searchInput) {
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') performSearch();
            });
        }

        // Article search
        const articleSearchInput = document.getElementById('articleSearch');
        if (articleSearchInput) {
            articleSearchInput.addEventListener('input', (e) => {
                const query = e.target.value;
                if (query.length > 2) {
                    dashboard.loadArticles({ search: query });
                }
            });
        }

        // Load sync mode
        kbApi.getSyncMode().then(data => {
            if (data && data.mode) {
                document.getElementById('syncMode').value = data.mode;
            }
        }).catch(console.error);
    });
</script>
</body>
</html>